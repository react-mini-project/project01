{"ast":null,"code":"import _objectDestructuringEmpty from\"/Users/JJY/Desktop/project01/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _defineProperty from\"/Users/JJY/Desktop/project01/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/JJY/Desktop/project01/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/JJY/Desktop/project01/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/JJY/Desktop/project01/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/JJY/Desktop/project01/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import axios from\"axios\";var initialState={comments:[],isLoading:false,isSuccess:false,error:null};export var __getComments=createAsyncThunk(\"comments/getComments\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(payload,thunkAPI){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:3001/comments\");case 3:data=_context.sent;return _context.abrupt(\"return\",thunkAPI.fulfillWithValue(data.data));case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",thunkAPI.rejectWithValue(_context.t0));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var __addComment=createAsyncThunk(\"comments/addComment\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(payload,thunkAPI){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"http://localhost:3001/comments\",payload);case 3:data=_context2.sent;return _context2.abrupt(\"return\",thunkAPI.fulfillWithValue(data.data));case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(_context2.t0));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var __deleteComment=createAsyncThunk(\"comments/deleteComment\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(payload,thunkAPI){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"http://localhost:3001/comments/\".concat(payload));case 3:return _context3.abrupt(\"return\",thunkAPI.fulfillWithValue(payload));case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(_context3.t0));case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var __editComment=createAsyncThunk(\"comments/editComment\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(payload,thunkAPI){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.patch(\"http://localhost:3001/comments/\".concat(payload.id),payload);case 3:return _context4.abrupt(\"return\",thunkAPI.fulfillWithValue(payload));case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);return _context4.abrupt(\"return\",thunkAPI.rejectWithValue(_context4.t0));case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}());export var commentsSlice=createSlice({name:\"comments\",initialState:initialState,reducers:{clearTodo:function clearTodo(state,action){state.isSuccess=true;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,__getComments.pending,function(state){state.isLoading=true;// 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n}),_defineProperty(_extraReducers,__getComments.fulfilled,function(state,action){state.isLoading=false;// 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.comments=action.payload;// Store에 있는 comments에 서버에서 가져온 comments를 넣습니다.\n}),_defineProperty(_extraReducers,__getComments.rejected,function(state,action){state.isLoading=false;// 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.error=action.payload;// catch 된 error 객체를 state.error에 넣습니다.\n}),_defineProperty(_extraReducers,__addComment.pending,function(state){state.isLoading=true;state.isSuccess=false;}),_defineProperty(_extraReducers,__addComment.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.comments=[].concat(_toConsumableArray(state.comments),[action.payload]);}),_defineProperty(_extraReducers,__addComment.rejected,function(state,action){state.isLoading=false;// 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.error=action.payload;// catch 된 error 객체를 state.error에 넣습니다.\n}),_defineProperty(_extraReducers,__deleteComment.pending,function(state){state.isLoading=true;state.isSuccess=false;}),_defineProperty(_extraReducers,__deleteComment.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.comments=state.comments.filter(function(comment){return comment.id!==action.payload;});}),_defineProperty(_extraReducers,__deleteComment.rejected,function(state,action){state.isLoading=false;// 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.error=action.payload;// catch 된 error 객체를 state.error에 넣습니다.\n}),_defineProperty(_extraReducers,__editComment.pending,function(state){state.isLoading=true;}),_defineProperty(_extraReducers,__editComment.fulfilled,function(state,action){state.isLoading=false;state.comments=state.comments.map(function(comment){if(comment.id===action.payload.thisID){console.log(comment.comment,action.payload.editComment);return _objectSpread(_objectSpread({},comment),{},{comment:action.payload.editComment});}else{return comment;}});}),_defineProperty(_extraReducers,__editComment.rejected,function(state,action){state.isLoading=false;state.error=action.payload;}),_extraReducers)});_objectDestructuringEmpty(commentsSlice.actions);export{};export default commentsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","comments","isLoading","isSuccess","error","__getComments","payload","thunkAPI","get","data","fulfillWithValue","rejectWithValue","__addComment","post","__deleteComment","delete","__editComment","patch","id","commentsSlice","name","reducers","clearTodo","state","action","extraReducers","pending","fulfilled","rejected","filter","comment","map","thisID","console","log","editComment","actions","reducer"],"sources":["/Users/JJY/Desktop/project01/src/redux/modules/commentsSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nconst initialState = {\n  comments: [],\n  isLoading: false,\n  isSuccess: false,\n  error: null,\n};\n\nexport const __getComments = createAsyncThunk(\n  \"comments/getComments\",\n  async (payload, thunkAPI) => {\n    try {\n      const data = await axios.get(\"http://localhost:3001/comments\");\n      return thunkAPI.fulfillWithValue(data.data);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\n\nexport const __addComment = createAsyncThunk(\n  \"comments/addComment\",\n  async (payload, thunkAPI) => {\n    try {\n      const data = await axios.post(\"http://localhost:3001/comments\", payload);\n      return thunkAPI.fulfillWithValue(data.data);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\n\nexport const __deleteComment = createAsyncThunk(\n  \"comments/deleteComment\",\n  async (payload, thunkAPI) => {\n    try {\n      await axios.delete(`http://localhost:3001/comments/${payload}`);\n      return thunkAPI.fulfillWithValue(payload);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\n\nexport const __editComment = createAsyncThunk(\n  \"comments/editComment\",\n  async (payload, thunkAPI) => {\n    try {\n      await axios.patch(`http://localhost:3001/comments/${payload.id}`, payload);\n      return thunkAPI.fulfillWithValue(payload);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\n\n\nexport const commentsSlice = createSlice({\n  name: \"comments\",\n  initialState,\n  reducers: {\n    clearTodo: (state, action) => {\n      state.isSuccess = true\n    }\n  },\n  extraReducers: {\n    [__getComments.pending]: (state) => {\n      state.isLoading = true; // 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n    },\n    [__getComments.fulfilled]: (state, action) => {\n      state.isLoading = false; // 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.comments = action.payload; // Store에 있는 comments에 서버에서 가져온 comments를 넣습니다.\n    },\n    [__getComments.rejected]: (state, action) => {\n      state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n    },\n    [__addComment.pending]: (state) => {\n      state.isLoading = true;\n      state.isSuccess = false;\n    },\n    [__addComment.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.comments = [...state.comments, action.payload]\n    },\n    [__addComment.rejected]: (state, action) => {\n      state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n    },\n    [__deleteComment.pending]: (state) => {\n      state.isLoading = true;\n      state.isSuccess = false;\n    },\n    [__deleteComment.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.comments = state.comments.filter((comment) => comment.id !== action.payload\n      )\n    },\n    [__deleteComment.rejected]: (state, action) => {\n      state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n    },\n    [__editComment.pending]: (state) => {\n      state.isLoading = true;\n    },\n    [__editComment.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      \n      state.comments = state.comments.map((comment) => {\n        \n        if (comment.id === action.payload.thisID) {\n          console.log(comment.comment, action.payload.editComment)\n          return {...comment, comment:action.payload.editComment}\n        } else {\n          return comment\n        }\n      }\n      )\n    },\n    [__editComment.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n  },\n});\n\nexport const {} = commentsSlice.actions;\nexport default commentsSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}